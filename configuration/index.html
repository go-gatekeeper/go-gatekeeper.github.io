<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.78.2" />
    <meta name="description" content="Gatekeeper&#39;s homepage">
<meta name="author" content="gogatekeeper">

    <link rel="shortcut icon" href="/logo/logo.svg" type="image/x-icon" />

    <title>Configuration Options - Gatekeeper</title>

    
    <link href="/css/nucleus.css?1609003606" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1609003606" rel="stylesheet">
    <link href="/css/hybrid.css?1609003606" rel="stylesheet">
    <link href="/css/featherlight.min.css?1609003606" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1609003606" rel="stylesheet">
    <link href="/css/auto-complete.css?1609003606" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1609003606" rel="stylesheet">
    <link href="/css/theme.css?1609003606" rel="stylesheet">
    <link href="/css/hugo-theme.css?1609003606" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1609003606" rel="stylesheet">
    
    <link href="/css/index.css?1609003606" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1609003606"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/configuration/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/'>
  <img src="/logo/logo.svg" width="200" />
  <div id="logo-text">gatekeeper</div>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1609003606"></script>
<script type="text/javascript" src="/js/auto-complete.js?1609003606"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/gogatekeeper.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1609003606"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/configuration/" title="Configuration Options" class="dd-item
        parent
        active
        
        ">
      <a href="/configuration/">
          Configuration Options
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/gogatekeeper/gatekeeper"><i class='fab fa-github fa-fw'></i> Github repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://discord.gg/zRqVXXTMCv"><i class='fab fa-discord fa-fw'></i> Join us on Discord</a>
              </li>
          
              <li>
                  <a class="padding" href="https://www.keycloak.org/documentation"><i class='fas fa-code fa-fw'></i> Keycloak Docs</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/'></a> > Configuration Options
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#listen"><code>listen</code></a></li>
    <li><a href="#listen-http"><code>listen-http</code></a></li>
    <li><a href="#discovery-url"><code>discovery-url</code></a></li>
    <li><a href="#client-id"><code>client-id</code></a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#client-secret"><code>client-secret</code></a></li>
    <li><a href="#redirection-url"><code>redirection-url</code></a></li>
    <li><a href="#revocation-url"><code>revocation-url</code></a></li>
    <li><a href="#skip-openid-provider-tls-verify"><code>skip-openid-provider-tls-verify</code></a></li>
    <li><a href="#openid-provider-proxy"><code>openid-provider-proxy</code></a></li>
    <li><a href="#openid-provider-timeout"><code>openid-provider-timeout</code></a></li>
    <li><a href="#base-uri"><code>base-uri</code></a></li>
    <li><a href="#oauth-uri"><code>oauth-uri</code></a></li>
    <li><a href="#oauth-uri-1"><code>oauth-uri</code></a></li>
    <li><a href="#scopes"><code>scopes</code></a></li>
    <li><a href="#upstream-url"><code>upstream-url</code></a></li>
    <li><a href="#upstream-ca"><code>upstream-ca</code></a></li>
    <li><a href="#resources"><code>resources</code></a></li>
    <li><a href="#headers"><code>headers</code></a></li>
    <li><a href="#preserve-host"><code>preserve-host</code></a></li>
    <li><a href="#request-id-header"><code>request-id-header</code></a></li>
    <li><a href="#enable-logout-redirect"><code>enable-logout-redirect</code></a></li>
    <li><a href="#enable-default-deny"><code>enable-default-deny</code></a></li>
    <li><a href="#enable-encrypted-token"><code>enable-encrypted-token</code></a></li>
    <li><a href="#force-encrypted-cookie"><code>force-encrypted-cookie</code></a></li>
    <li><a href="#enable-logging"><code>enable-logging</code></a></li>
    <li><a href="#enable-json-logging"><code>enable-json-logging</code></a></li>
    <li><a href="#enable-forwarding"><code>enable-forwarding</code></a></li>
    <li><a href="#enable-security-filter"><code>enable-security-filter</code></a></li>
    <li><a href="#enable-refresh-tokens"><code>enable-refresh-tokens</code></a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Configuration Options
            </h1>
          

        



	<h2 id="listen"><code>listen</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_LISTEN</code></li>
<li>Example: <code>:80</code></li>
<li>Required: Yes</li>
<li>Default: None</li>
<li>Related: <code>listen-http</code></li>
</ul>
</div>

<p><code>listen</code> configures the main listening interface (compare with <code>listen-http</code>). Examples for</p>
<ul>
<li>regular <code>http(s)</code>:
<ul>
<li>use <code>:80</code> or <code>:443</code> to listen on all interfaces</li>
<li><code>127.0.0.1:443</code> to only listen on a certain interface</li>
</ul>
</li>
<li>unix socket: <code>unix:///tmp/echo.sock</code> (add the prefix <code>unix://</code>)</li>
</ul>

<div class="notices info" ><p>This config is passed to golang&rsquo;s <code>net.Listen()</code>, so use strings acceptable by <code>address</code>.</p>
</div>

<hr>
<h2 id="listen-http"><code>listen-http</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_LISTEN_HTTP</code></li>
<li>Example: <code>:80</code></li>
<li>Required: Yes</li>
<li>Default: None</li>
<li>Related: <code>listen</code></li>
</ul>
</div>

<p><code>listen-http</code> configures the secondary listening interface.
This listener has no TLS support, and uses the same configuration syntax as <code>listen</code>.</p>

<div class="notices info" ><p>Usually, we only use <code>listen</code> and not set <code>listen-http</code>.</p>
</div>

<hr>
<h2 id="discovery-url"><code>discovery-url</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_DISCOVERY_URL</code></li>
<li>Example: <code>https://keycloak.localhost/auth/realms/applications</code> (refer to <a href="https://github.com/gogatekeeper/demo-docker-compose">demo</a>)</li>
<li>Required: Yes, unless <code>skip-token-verification</code> is set, and gatekeeper is in reverse proxy mode</li>
<li>Default: None</li>
<li>Related: <code>skip-openid-provider-tls-verify</code>, <code>openid-provider-proxy</code>, <code>openid-provider-timeout</code></li>
</ul>
</div>

<p>gatekeeper will get information about the authorization server through the
authorization server&rsquo;s <code>openid-configuration</code> well-known URI, according to
<a href="https://tools.ietf.org/html/rfc8414">RFC8414</a>.</p>
<p>gatekeeper will grab this metadata from <code>discovery-url</code> + <code>/.well-known/openid-configuration</code>
as is registered with <a href="https://www.iana.org/assignments/well-known-uris/well-known-uris.xhtml">IANA</a></p>
<p>Specify <code>discovery-url</code> without <code>/.well-known/openid-configuration</code>.</p>
<p>Here are links to information about <code>discovery-url</code>s for some other OAuth providers</p>
<ul>
<li><a href="https://developers.google.com/identity/protocols/oauth2/openid-connect">Google Identity Platform</a></li>
<li><a href="https://auth0.com/docs/protocols/configure-applications-with-oidc-discovery">Auth0</a></li>
<li><a href="https://docs.identityserver.io/en/dev/endpoints/discovery.html">IdentityServer4</a></li>
<li><a href="https://docs.pingidentity.com/bundle/pingfederate-90/page/concept_openIdConnectMetadataEndpoint.html">PingFederate</a></li>
</ul>
<hr>
<h2 id="client-id"><code>client-id</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_CLIENT_ID</code></li>
<li>Example: <code>whoami</code> (refer to <a href="https://github.com/gogatekeeper/demo-docker-compose">demo</a>)</li>
<li>Required: Yes, unless <code>skip-token-verification</code> is set, and gatekeeper is in reverse proxy mode</li>
<li>Default: None</li>
<li>Related: <code>client-secret</code></li>
</ul>
</div>

<p><code>client-id</code> is the Client ID for an OAuth2 client (your app is the OAuth2 client, in
this case).</p>
<h4 id="in-reverse-proxy-mode">In reverse proxy mode</h4>
<p>As part of the OAuth2 authorization code flow, gatekeeper will use <code>client-id</code> and
<code>client-secret</code> to authenticate with the server when it needs to</p>
<ul>
<li>exchange the authorization code for tokens</li>
<li>refresh the access token</li>
</ul>
<p>The client ID and secret are also used to invoke the revocation URL at the
authorization server.</p>
<p>If the login handler is enabled (<code>enable-login-handler</code>), the credentials are
also used to login at the authorization provider using the OAuth2 Resource
Owner Password Credentials flow.</p>
<p><code>client-id</code> is also used to check access tokens to ensure that <code>client-id</code> is
among the audiences in the <code>aud</code> field of the token.</p>
<h4 id="in-forward-signing-proxy-mode">In forward-signing proxy mode</h4>
<p>gatekeeper will use <code>client-id</code> and <code>client-secret</code> to authenticate with
the server to get tokens for outbound requests.</p>
<hr>
<h2 id="client-secret"><code>client-secret</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_CLIENT_SECRET</code></li>
<li>Example: <code>932475b6-9748-41b8-8fd7-c6ce2d845ece</code> (refer to <a href="https://github.com/gogatekeeper/demo-docker-compose">demo</a>)</li>
<li>Required: Yes, unless <code>skip-token-verification</code> is set, and gatekeeper is in reverse proxy mode</li>
<li>Default: None</li>
<li>Related: <code>client-id</code></li>
</ul>
</div>

<p><code>client-secret</code> is the client secret for an OAuth2 client (your app is the
OAuth2 client, in this case). This is used with <code>client-id</code> as a pair of
credentials. See <code>client-id</code> for how this is used.</p>
<hr>
<h2 id="redirection-url"><code>redirection-url</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_REDIRECTION_URL</code></li>
<li>Example: <code>932475b6-9748-41b8-8fd7-c6ce2d845ece</code> (refer to <a href="https://github.com/gogatekeeper/demo-docker-compose">demo</a>)</li>
<li>Required: Yes, unless <code>skip-token-verification</code> is set, and gatekeeper is in reverse proxy mode</li>
<li>Default: None</li>
<li>Related: <code>client-id</code></li>
</ul>
</div>

<p><code>client-secret</code> is the client secret for an OAuth2 client (your app is the
OAuth2 client, in this case). This is used with <code>client-id</code> as a pair of
credentials. See <code>client-id</code> for how this is used.</p>
<hr>
<h2 id="revocation-url"><code>revocation-url</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_REVOCATION_URL</code></li>
<li>Example: <code>https://keycloak.localhost/auth/realms/applications/protocol/openid-connect/logout</code></li>
<li>Required: No. Will attempt to discover this url from OpenID discovery-url response</li>
<li>Default: None</li>
<li>Related: <code>discovery-url</code></li>
</ul>
</div>

<p>If <code>revocation-url</code> is not specified, the <code>end_session_endpoint</code> of the OpenID
discovery-url response will be used as the <code>revocation-url</code>. If neither is
available, no logout at the authorization provider will be done.</p>
<p><code>revocation-url</code> is used during the logout process. When the <code>/oauth/logout</code>
endpoint on gatekeeper is called, gatekeeper will request revocation of this
session&rsquo;s refresh token by doing an authenticated <code>POST</code> to this <code>revocation-url</code>
with the refresh token.</p>
<hr>
<h2 id="skip-openid-provider-tls-verify"><code>skip-openid-provider-tls-verify</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: false</li>
<li>Related: -</li>
</ul>
</div>

<p>If <code>skip-openid-provider-tls-verify</code> is set to <code>true</code>, gatekeeper will skip
verification of the authorization server&rsquo;s (or OpenID provider&rsquo;s, in this case)
certificate chain and host name.</p>
<p>gatekeeper will accept any certificate presented by the server and any host name
in that certificate.</p>
<p>This flag is directly used to configure <code>InsecureSkipVerify</code> in <a href="https://golang.org/pkg/crypto/tls/">golang&rsquo;s tls
package</a>.</p>
<hr>
<h2 id="openid-provider-proxy"><code>openid-provider-proxy</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>http://proxy.example.com:80</code></li>
<li>Required: No</li>
<li>Default: No proxy</li>
<li>Related: -</li>
</ul>
</div>

<p>Gatekeeper will use this proxy for requests to the OpenID provider, for example
to reach the discovery url, to get tokens, etc.</p>
<hr>
<h2 id="openid-provider-timeout"><code>openid-provider-timeout</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>3s</code>, or <code>314ms</code>, (any string that can be parsed by <a href="https://golang.org/pkg/time/#ParseDuration">ParseDuration</a></li>
<li>Required: No</li>
<li>Default: <code>30s</code></li>
<li>Related: -</li>
</ul>
</div>

<p>Timeout for pulling OpenID configuration from the OpenID provider. Will be
parsed by <a href="https://golang.org/pkg/time/#ParseDuration">ParseDuration</a>.</p>
<hr>
<h2 id="base-uri"><code>base-uri</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_BASE_URI</code></li>
<li>Example: <code>/base-uri</code></li>
<li>Required: No</li>
<li>Default: <code>&quot;&quot;</code></li>
<li>Related: -</li>
</ul>
</div>

<p><code>base-uri</code> is the the base URI of your app. This is where your app lives at the
domain, so if your domain is <code>https://www.example.com</code> and your app is at the
path <code>https://www.example.com/app</code>, then base URI should be <code>/app</code>.</p>
<p>This is used to</p>
<ul>
<li>build oauth related paths, such as the <code>/logout</code> endpoint</li>
<li>set the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#Path_attribute:~:text=Path%20attribute,-The">path for cookies</a>,
which determines which parts of your site the cookie is valid on, which in
turn determines if the user remains authenticated as they visit different
parts of the site</li>
</ul>
<hr>
<h2 id="oauth-uri"><code>oauth-uri</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_OAUTH_URI</code></li>
<li>Example: <code>/base-uri</code></li>
<li>Required: No</li>
<li>Default: <code>&quot;/oauth&quot;</code></li>
<li>Related: -</li>
</ul>
</div>

<p>This is the prefix for the OAuth endpoints on gatekeeper, such as (if the default <code>/oauth</code> is used, and <code>base-uri</code> is <code>&quot;&quot;</code>)</p>
<ul>
<li><code>/oauth/authorization</code>: Redirects to the authorization server</li>
<li><code>/oauth/callback</code>: Handles callback (response) from the authorization server</li>
<li><code>/oauth/expired</code>: Checks if the token has expired</li>
<li><code>/oauth/health</code>: The healthcheck endpoint for gatekeeper</li>
<li><code>/oauth/logout?redirect=url</code>: Direct the browser here to log out</li>
<li><code>/oauth/token</code>: Return the token in a json</li>
<li><code>/oauth/login</code>: A generic endpoint for clients to perform a user credentials
login to the authorization server</li>
</ul>
<hr>
<h2 id="oauth-uri-1"><code>oauth-uri</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_OAUTH_URI</code></li>
<li>Example: <code>/base-uri</code></li>
<li>Required: No</li>
<li>Default: <code>&quot;/oauth&quot;</code></li>
<li>Related: -</li>
</ul>
</div>

<p>This is the prefix for the OAuth endpoints on gatekeeper, such as (if the default <code>/oauth</code> is used, and <code>base-uri</code> is <code>&quot;&quot;</code>)</p>
<ul>
<li><code>/oauth/authorization</code>: Redirects to the authorization server</li>
<li><code>/oauth/callback</code>: Handles callback (response) from the authorization server</li>
<li><code>/oauth/expired</code>: Checks if the token has expired</li>
<li><code>/oauth/health</code>: The healthcheck endpoint for gatekeeper</li>
<li><code>/oauth/logout?redirect=url</code>: Direct the browser here to log out</li>
<li><code>/oauth/token</code>: Return the token in a json</li>
<li><code>/oauth/login</code>: A generic endpoint for clients to perform a user credentials
login to the authorization server</li>
</ul>
<hr>
<h2 id="scopes"><code>scopes</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: (yaml/json list) <code>[&quot;offline&quot;, &quot;foobar&quot;]</code></li>
<li>Required: No</li>
<li>Default: Always appends these: <code>[&quot;openid&quot;, &quot;email&quot;, &quot;profile&quot;]</code></li>
<li>Related: -</li>
</ul>
</div>

<p>These are the scopes that are requested when the client is redirected to the authorization server.</p>
<p>In Keycloak, these are the scopes that are either created as part of the
client, to client scopes in the realm. For Keycloak, scopes are strings tagged
to mappers. If requested by the client, the associated mappers will be applied
on the tokens.</p>
<hr>
<h2 id="upstream-url"><code>upstream-url</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_UPSTREAM_URL</code></li>
<li>Example: <code>http://whoami:80</code> (refer to <a href="https://github.com/gogatekeeper/demo-docker-compose">demo</a>)</li>
<li>Required: Yes</li>
<li>Default: None</li>
<li>Related: <code>upstream-ca</code></li>
</ul>
</div>

<p>This tells gatekeeper how to contact the upstream (your app/service that is protected by gatekeeper)</p>
<hr>
<h2 id="upstream-ca"><code>upstream-ca</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>/tmp/path-to-ca-cert</code> (PEM encoded)</li>
<li>Required: No</li>
<li>Default: None (Will use system cert store)</li>
<li>Related: <code>upstream-url</code></li>
</ul>
</div>

<p>This is the TLS CA certificate that will be used to verify TLS when communicating with the upstream.</p>
<hr>
<h2 id="resources"><code>resources</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: Refer to <a href="https://github.com/gogatekeeper/demo-docker-compose">demo</a></li>
<li>Required: Yes</li>
<li>Default: None</li>
<li>Related: -</li>
</ul>
</div>

<p>These tell gatekeeper how to authenticate or authorize the resources at the upstream.</p>
<p>TODO add more details.</p>
<hr>
<h2 id="headers"><code>headers</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example:
<pre><code>headers:
  x-foo-bar: baz
</code></pre></li>
<li>Required: No</li>
<li>Default: None</li>
<li>Related: -</li>
</ul>
</div>

<p>Add custom headers to the request that goes upstream. The headers will be capitalized:</p>
<pre><code>x-foo-bar =&gt; X-Foo-Bar
X-FooBar =&gt; X-Foobar
X-FOO-BAR =&gt; X-Foo-Bar
</code></pre><hr>
<h2 id="preserve-host"><code>preserve-host</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: -</li>
</ul>
</div>

<p>If <code>preserve-host</code> is <code>true</code>, the <code>Host</code> header that gatekeeper receives will be forwarded to the upstream service. Otherwise, the <code>Host</code> header will be set to whatever gatekeeper uses to make the request to the upstream.</p>
<hr>
<h2 id="request-id-header"><code>request-id-header</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_REQUEST_ID_HEADER</code></li>
<li>Example: <code>&quot;X-Request-Id&quot;</code></li>
<li>Required: No</li>
<li>Default: <code>&quot;X-Request-Id&quot;</code></li>
<li>Related: <code>enable-request-id</code></li>
</ul>
</div>

<p>The HTTP header name for the autogenerated request ID sent as a header to the upstream service. Will be added if <code>enable-request-id</code> is set to true.</p>
<hr>
<h2 id="enable-logout-redirect"><code>enable-logout-redirect</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: -</li>
</ul>
</div>

<p>If <code>true</code>, when the logout address is accessed, the user will be redirected to the identity provider on logout, with a <code>redirect_uri</code> pointing back to the gatekeeper service.</p>
<p>The identity provider can use <code>redirect_uri</code> to redirect the user back to gatekeeper again.</p>
<p>If <code>false</code>, when the logout address is accessed, the user will remain at gatekeeper&rsquo;s logout url.</p>
<hr>
<h2 id="enable-default-deny"><code>enable-default-deny</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: <code>resources</code></li>
</ul>
</div>

<p>Used in conjunction with <code>resources</code> for authorization.</p>
<p>If set, gatekeeper will deny all requests to the upstream by default. This can then be relaxed with definition of <code>resources</code>.</p>
<hr>
<h2 id="enable-encrypted-token"><code>enable-encrypted-token</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: <code>force-encrypted-cookie</code>, <code>encryption-key</code></li>
</ul>
</div>

<p>If set, gatekeeper will</p>
<ul>
<li>Encrypt the access token in the cookie that is set for the browser with <code>encryption-key</code></li>
<li>Assume that incoming access tokens in the <code>Authorization</code> header are also
encrypted, and will decrypt the token before using it</li>
</ul>
<hr>
<h2 id="force-encrypted-cookie"><code>force-encrypted-cookie</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: <code>enable-encrypted-token</code>, <code>encryption-key</code></li>
</ul>
</div>

<p>Same as <code>enable-encrypted-token</code>. TODO confirm this.</p>
<hr>
<h2 id="enable-logging"><code>enable-logging</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: -</li>
</ul>
</div>

<p>If set, requests to gatekeeper are logged. Here&rsquo;s a sample of the information that is logged:</p>
<pre><code>2020-12-26T06:21:38.851Z        info    src/middleware.go:146   client request  {&quot;latency&quot;: 0.000209767, &quot;status&quot;: 303, &quot;bytes&quot;: 322, &quot;client_ip&quot;: &quot;172.18.0.2:39368&quot;, &quot;method&quot;: &quot;GET&quot;, &quot;path&quot;: &quot;/oauth/authorize&quot;}
</code></pre><p><code>raw path</code> is also logged if it is different from <code>path</code> and is not <code>&quot;&quot;</code>. See <a href="https://golang.org/pkg/net/url/">go docs</a> for the difference between <code>Path</code> and <code>RawPath</code>.</p>
<hr>
<h2 id="enable-json-logging"><code>enable-json-logging</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: -</li>
</ul>
</div>

<p>If set, logging is formatted in json.</p>
<p>If the regular log is like this,</p>
<pre><code>2020-12-26T06:21:38.851Z        info    src/middleware.go:146   client request  {&quot;latency&quot;: 0.000209767, &quot;status&quot;: 303, &quot;bytes&quot;: 322, &quot;client_ip&quot;: &quot;172.18.0.2:39368&quot;, &quot;method&quot;: &quot;GET&quot;, &quot;path&quot;: &quot;/oauth/authorize&quot;}
</code></pre><p>the json version is like this.</p>
<pre><code>{&quot;level&quot;:&quot;info&quot;,&quot;ts&quot;:&quot;2020-12-26T06:21:38.851Z&quot;,&quot;caller&quot;:&quot;src/middleware.go:146&quot;,&quot;msg&quot;:&quot;client request&quot;,&quot;latency&quot;:0.000209767,&quot;status&quot;:303,&quot;bytes&quot;:322,&quot;client_ip&quot;:&quot;172.18.0.2:39368&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;path&quot;:&quot;/oauth/authorize&quot;}
</code></pre><hr>
<h2 id="enable-forwarding"><code>enable-forwarding</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: None</li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: -</li>
</ul>
</div>

<p>Sets gatekeeper in a forwarding proxy mode, for signing outbound requests. This is mutually exclusive with the default reverse proxy mode.</p>
<hr>
<h2 id="enable-security-filter"><code>enable-security-filter</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_ENABLE_SECURITY_FILTER</code></li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: -</li>
</ul>
</div>

<p>Enables a bunch of security checks on the request using middleware. TODO add more detail.</p>
<hr>
<h2 id="enable-refresh-tokens"><code>enable-refresh-tokens</code></h2>

<div class="config-details"><ul>
<li>Environment Variable: <code>PROXY_ENABLE_REFRESH_TOKEN</code></li>
<li>Example: <code>true</code> or <code>false</code></li>
<li>Required: No</li>
<li>Default: <code>false</code></li>
<li>Related: -</li>
</ul>
</div>

<p>Set this to get gatekeeper to handle refreshing of access tokens. Otherwise, gatekeeper will just re-authenticate with the authorization server whenever the access token expires.</p>
<hr>





<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1609003606"></script>
    <script src="/js/perfect-scrollbar.min.js?1609003606"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1609003606"></script>
    <script src="/js/jquery.sticky.js?1609003606"></script>
    <script src="/js/featherlight.min.js?1609003606"></script>
    <script src="/js/highlight.pack.js?1609003606"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1609003606"></script>
    <script src="/js/learn.js?1609003606"></script>
    <script src="/js/hugo-learn.js?1609003606"></script>
    
        
            <script src="/mermaid/mermaid.js?1609003606"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
